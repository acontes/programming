<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Component programming with ProActive - perspectives</title>
<link rel="stylesheet" href="../ProActive.css">
</head>
<body style="background-color: white;">
<!--
Header : start
~~~ -->
<table width="100%">
	<tbody>
		<tr>
			<td align="left" valign="middle">
			<table border="1" cellpadding="2" cellspacing="0">
				<tbody>
					<tr>
						<td class="smallLink1">&nbsp;&nbsp;<a class="smallLink1"
							href="../../../../overview-summary.html">back to API</a>&nbsp;&nbsp;</td>
						<td class="smallLink1">&nbsp;&nbsp;<a class="smallLink1" href="../index.html">back to index</a>&nbsp;&nbsp;</td>
						<td class="smallLink2">&nbsp;&nbsp;<a class="smallLink2" href="configuration.html">prev</a>&nbsp;&nbsp;</td>
						<td class="smallLink2">&nbsp;&nbsp;<a class="smallLink2" href="examples.html">next</a>&nbsp;&nbsp;</td>
					</tr>
				</tbody>
			</table>
			</td>
			<td align="right" valign="top"><img src="../ProActiveLogo200x34.gif" alt=""></td>
		</tr>
	</tbody>
</table>
<hr>
<!-- Link to index : end -->

<h1><a name="adl"></a>Architecture Description Language</h1>
<p class="textNormal">The Architecture Description Language (ADL) is used to configure and deploy
component systems. The architecture of the system is described in a normalized XML file.</p>
<p><b>The ADL has been updated </b>and is now an extension of the standard Fractal ADL, allowing to
reuse ProActive-specific features such as distributed deployment using deployment descriptors.</p>
<p>The distributed deployment facilities offered by ProActive are reused, and the notion of virtual
node is integrated in the component ADL. For this reason, the components ADL has to be associated
with a deployment descriptor (this is done at parsing time : both files are given to the parser).</p>
<p>One should refer to the <a href="http://fractal.objectweb.org/tutorials/adl/index.html">Fractal
ADL tutorial</a> for more detailed information about the ADL. Here is a short overview, and a
presentation of some added features.</p>
<p>Note that because this ADL is based on the Fractal ADL, it requires the following libraries
(included in the /lib directory of the ProActive distribution) : fractal-adl.jar, dtdparser.jar,
ow_deployment_scheduling.jar</p>
<h2><a name="Overview"></a>Overview</h2>
<p>Components are defined in <b>definition</b> files, which are .fractal files. The syntax of the
document is validated against a DTD retreived from the classpath</p>
<pre class="snippet">classpath://org/objectweb/proactive/core/component/adl/xml/proactive.dtd</pre>
<p>The <b>definition</b> element has a name (which must be the same name that the file's) and
inheritance is supported through the attribute "extends" :</p>
<pre class="snippet">definition name="org.objectweb.proactive.examples.components.helloworld.helloworld-distributed-wrappers"</pre>
<p>The exportedVirtualNodes elements is described later in this section</p>
<p>Components can be specified and created in this definition, and these components can themselves
be defined in other definition files :</p>
<pre class="snippet">component name="client-wrapper" definition="org.objectweb.proactive.examples.components.helloworld.ClientType"</pre>
<p>Nesting is allowed for composite components and is done by adding other "component" elements.</p>
<p>The <b>binding</b> element specifies bindings between interfaces of components ", and specifying
"this" as the name of the component refers to the current enclosing component.</p>
<pre class="snippet">binding client="this.r" server="client.r"/</pre>
<p>The <b>controller</b> elements can have the following "desc" values : "composite", "parallel" or
"primitive". A parallel component and the components it contains should be type-compatible</p>
<p>Primitive components specify the <b>content</b> element, which indicates the implementation class
containing the business logic for this component :</p>
<pre class="snippet">content class="org.objectweb.proactive.examples.components.helloworld.ClientImpl"</pre>
<p>The <b>virtual-node</b> element offers distributed deployment information. It can be exported and
composed in the exportedVirtualNodes element.<br>
The component will be instantiated on the virtual node it specified (or the one that it exported).
For a composite or a parallel component, it means it will be instantiated on the (first if there are
several nodes mapped) node of the virtual node. For a primitive component, if the virtual node
defines several nodes (cardinality="multiple"), there will be as many instances of the primitive
component as there are underlying nodes. Each of these instances will have a suffixed name looking
like : "primiveComponentName-cyclicInstanceNumber-n", where primitiveComponentName is the name
defined in the ADL. This automatic replication is used in the parallel components.</p>
<pre class="snippet">virtual-node name="client-node" cardinality="single"</pre>
<p>The syntax is similar to the standard Fractal ADL, and the parsing engine has been extended.
Features specific to ProActive are :</p>
<ul>
	<li>Virtual nodes have a cardinality property : either "single" or "multiple". When "single", it
	means the virtual node in the deployment descriptor should contain 1 node ; when "multiple", it
	means the virtual node in the deployment descriptor should contain more than 1 node.</li>
	<li>Virtual nodes can be <b>exported</b> and <b>composed</b>.</li>
	<li>Template components are not handled.</li>
	<li>The controller description includes "parallel" as a valid attribute.</li>
	<li>The validating DTD has to be specified as :
	classpath://org/objectweb/proactive/core/component/adl/xml/proactive.dtd</li>
</ul>
<h2><a name="Example"></a>Example</h2>
<p class="textNormal">The easiest way to understand the ADL is to see <a
	href="helloworld-distributed.html" target="_blank">an example</a>. It corresponds to the helloworld
example described later in this document.<br>
</p>
<p></p>
<a name="composition of virtual nodes"></a>
<h2><a name="Exportation_and_composition_of_virtual_nodes"></a>Exportation and composition of virtual nodes</h2>
<p>Components are deployed on the virtual node that is specified in their definition ; it has to
appear in the deployment descriptor <u>unless</u> this virtual node is exported. In this case, the
name of the exported virtual node should appear in the deployment descriptor, unless this exported
virtual node is itself exported.</p>
<p>When exported, a virtual node can take part in the composition of other exported virtual nodes.
The idea is to further extend reusability of existing (and packaged, packaging being a forthcoming
feature of Fractal) components.</p>
<p>In the example, the component defined in helloworld-distributed-wrappers.fractal exports the
virtual nodes VN1 and VN2:</p>
<pre class="snippet">exportedVirtualNodes<br> exportedVirtualNode name="VN1"<br>  composedFrom<br>   composingVirtualNode component="client" name="client-node"<br>  /composedFrom<br> /exportedVirtualNode<br> exportedVirtualNode name="VN2"<br>  composedFrom<br>   composingVirtualNode component="server" name="server-node"/<br>  /composedFrom<br> /exportedVirtualNode<br>/exportedVirtualNodes</pre>
<p>VN1 is composed of the exported virtual node "client-node" from the component named client</p>
<p>In the definition of the client component (ClientImpl.fractal), we can see that client-node is an
exportation of a virtual node which is also name "client-node" :</p>
<pre class="snippet">exportedVirtualNodes<br> exportedVirtualNode name="client-node"<br>   composedFrom<br>     composingVirtualNode component="this" name="client-node"/<br>   /composedFrom<br> /exportedVirtualNode<br>/exportedVirtualNodes<br>...<br>virtual-node name="client-node" cardinality="single"/</pre>
<p>Although this is a simplistic example, one should foresee a situation where ClientImpl would be a
prepackaged component, where its ADL could not be modified ; the exportation and composition of
virtual nodes allow to adapt the deployment of the system depending on the existing infrastructure.
Colocation can be specified in the enclosing component definition
(helloworld-distributed-wrappers.fractal) :</p>
<pre class="snippet">exportedVirtualNodes<br> exportedVirtualNode name="VN1"<br>  composedFrom<br>   composingVirtualNode component="client" name="client-node"<br>   composingVirtualNode component="server" name="server-node"/<br>  /composedFrom<br> /exportedVirtualNode<br>/exportedVirtualNodes</pre>
<p>As a result, the client and server component will be colocated / deployed on the same virtual
node. This can be profitable if there is a lot of communications between these two components.</p>
<p>When specifying "null" as the name of an exported virtual node, the components will be deployed
on the current virtual machine. This can be useful for debugging purposes.</p>
<span style="font-weight: bold;"></span>
<h2><a name="usage">Usage</a></h2>
<p>The launcher, which parses the ADL, creates a corresponding component factory, and instantiates
and assembles the components as defined in the ADL, is started from the <code>org.objectweb.proactive.core.component.adl.Launcher</code>
class :</p>
<pre class="snippet">Launcher [-java|-fractal] &lt;definition&gt; [ &lt;itf&gt; ] [deployment-descriptor]) </pre>
<p>where [-java|-fractal] comes from the Fractal ADL Launcher (put -fractal for ProActive
components, this will be made optional for ProActive components in the next release),
&lt;definition&gt; is the name of the component to be instantiated and started, &lt;itf&gt; is the
name of its Runnable interface, if it has one, and &lt;deployment-descriptor&gt; the location of the
ProActive deployment descriptor to use. It is also possible to use this class directly from its
static main method.</p>

<p class="textSmall"><i> </i></p>
<!--
Footer : start
~~~ -->
<br>
<hr>
<div class="textSmall" align="right">Copyright &Acirc;&copy; April 2005 INRIA All Rights Reserved.
<p class="textNormal"></p>
<!-- Footer : end --></div>
</body>
</html>
