<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>FAQ</title>

<link rel="stylesheet" href="ProActive.css" type="text/css">
</head>
<body bgcolor="white">
<!--
 Header : start 
~~~ -->
<table width="100%" summary="">
	<tbody>
		<tr>
			<td align="left" valign="middle">
			<table cellpadding="2" cellspacing="0" border="1" summary="">
				<tbody>
					<tr>
						<td class="smallLink1">&nbsp;&nbsp;<a class="smallLink1"
							href="../../../../overview-summary.html">back to API</a>&nbsp;&nbsp;</td>
						<td class="smallLink1">&nbsp;&nbsp;<a class="smallLink1"
							href="index.html">back to index</a>&nbsp;&nbsp;</td>
						<td class="smallLink2">&nbsp;&nbsp;<a class="smallLink2"
							href="ProActiveRefBook.pdf">prev</a>&nbsp;&nbsp;</td>
						<td class="smallLink2">&nbsp;&nbsp;<a class="smallLink2"
							href="http://www-sop.inria.fr/oasis/proactive/doc/index.html#Papers">next</a>&nbsp;&nbsp;</td>
					</tr>
				</tbody>
			</table>
			</td>
			<td align="right" valign="top"><img src="ProActiveLogo200x34.gif"
				alt=""></td>
		</tr>

	</tbody>
</table>

<hr>
<!-- Link to index : end -->
<h1>Frequently Asked Questions</h1>

<p class="textNormal"><b>Note:</b> This FAQ is under construction. If
one of your question is not answered here, just send it at <a
	href="mailto:proactive@objectweb.org">proactive@objectweb.org</a>
and we'll update the FAQ.</p>

<h2><a name="list"></a>Questions</h2>

<ol class="listWithSpace">
	<li class="textNormal"><a href="#build">How do I build ProActive from
	the distribution ?</a></li>
	<li class="textNormal"><a href="#perm">Why do I get a Permission denied
	when trying to launch examples scripts under Linux</a></li>
	<li class="textNormal"><a href="#asm">Why do I get an exception
	java.lang.NoClassDefFoundError about asm?</a></li>
	<li class="textNormal"><a href="#bcel">Why do I get an exception
	java.lang.NoClassDefFoundError about bcel ?</a></li>
	<li class="textNormal"><a href="#javaSecurity">Why do I get an
	exception java.security.AccessControlException access denied ?</a></li>
	<li class="textNormal"><a href="#win">Why examples and compilation do
	not work under Windows?</a></li>
	<li class="textNormal"><a href="#nodeCreation">How does the node
	creation happen ?</a></li>
	<li class="textNormal"><a href="#rmiregistryCreation">How does the RMI
	Registry creation happen ?</a></li>
	<li class="textNormal"><a href="#classServer">What is a class server,
	why do we need one ?</a></li>
	<li class="textNormal"><a href="#reifiable">What is a reifiable object
	?</a></li>
	<li class="textNormal"><a href="#body">What is the body of an active
	object ? What are its local and remote representations ?</a></li>
	<li class="textNormal"><a href="#stub">What is a ProActive stub, how
	are they generated ?</a></li>
	<li class="textNormal"><a href="#stubProperties">Why my object's
	properties aren't updated ?</a></li>
	<li class="textNormal"><a href="#stubReference">How can I pass a
	reference on an active object or the difference between <code>this</code>
	and <code>ProActive.getStubOnThis()</code> ?</a></li>
	<li class="textNormal"><a href="#create">How can I create an active
	object ?</a></li>
	<li class="textNormal"><a href="#createMethods">What are the
	differences between instantiation based and object based active objects
	creation ?</a></li>
	<li class="textNormal"><a href="#noArgsConstructor">Why do I have do
	write a no-args constructor ?</a></li>
	<li class="textNormal"><a href="#activity">How do I control the
	activity of an active object ?</a></li>
	<li class="textNormal"><a href="#implementActivity">How do I implement
	the custom activity of an active object ?</a></li>
	<li class="textNormal"><a href="#liveAndActive">What happened to the
	former <b>live()</b> method and <b>Active</b> interface ?</a></li>
	<li class="textNormal"><a href="#asynch">Are the call to an Active
	Object always asynchronous ?</a></li>
	<li class="textNormal"><a href="#future">Why should I avoid to return
	null in methods body ?</a></li>
	<li class="textNormal"><a href="#JiniUse">How can I use <b>Jini </b> in
	ProActive ?</a></li>
	<li class="textNormal"><a href="#JiniPb">Why do I get an exception when
	using <b>Jini </b>?</a></li>
	<li class="textNormal"><a href="#config">What is the difference between
	passing parameters in Deployment Descriptor and setting properties in
	ProActive Configuration file?</a></li>
	<li class="textNormal"><a href="#valid_error">Why do I get the
	following message when parsing my xml deployment file:<br>
	ERROR: file:~/ProActive/descriptor.xml Line:2 Message:cvc-elt.1: Cannot
	find the declaration of element 'ProActiveDescriptor' </a></li>
	<li class="textNormal"><a href="#AO2comp"> How do I make a Component
	version out of an Active Object version ?</a></li>

</ol>

<h2><a name="answers"></a>Answers</h2>

<ol>
	<li class="textNormal">
	<h3><a name="build"> How do I build ProActive from the distribution ? </a></h3>
	<p class="textNormal">ProActive uses <a
		href="http://jakarta.apache.org/ant/">Ant</a> for its build. Assuming
	that the environment variable <code>JAVA_HOME</code> is properly set to
	your Java distribution, just go into the <code>compile</code> directory
	and use the script :</p>
	<ul>
		<li>on Windows : <code>build.bat all</code></li>
		<li>on Unix systems : <code>build all</code></li>

	</ul>
	<code>"all"</code> represents the target of the build. It will compile all sources files and generate the documentation.
	<p class="textNormal">If you want only to compile sources and not generate the documentation use</p>
	<ul>
		<li>on Windows : <code>build.bat compile</code></li>
		<li>on Unix systems : <code>build compile</code></li>

	</ul>

	<p class="textNormal">Other targets are available if needed :</p>

	<p class="textNormal"><b>General source file builds</b></p>
	<ul>
		<li><code>core</code> : ProActive core</li>
		<li><code>ext</code> : ProActive ext</li>
		<li><code>ic2d</code> : All IC2D</li>
		<li><code>examples</code> : All examples</li>
		<li><code>compile</code> : means all of the above</li>
		<li><code>all</code> : means all of the above + generates the documentation</li>

	</ul>


	<p class="textNormal"><b>Utility builds</b></p>
	<ul>
		<li><code>docs</code> : creates the docs directory with javadoc + doc</li>
		<li><code>clean</code> : removes all build generated file</li>
		<li><code>dist</code> : creates the distribution directory and files</li>

	</ul>

	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="perm"> Why do I get a Permission denied when trying to
	launch examples scripts under Linux </a></h3>

	<p class="textNormal">According to the tool used to unpackage the
	ProActive distribution, permissions of newly created files can be based
	on default UMASK permissions. If you get a permission denied, just run
	the command: chmod 755 *.sh in the ProActive/scripts/unix directory in
	order to change the permissions.</p>
	</li>
	<li class="textNormal">
	<h3><a name="asm"> Why do I get an exception
	java.lang.NoClassDefFoundError about asm? </a></h3>

	<p class="textNormal">ProActive uses <a
		href="http://www.objectweb.org/asm/">ASM</a> for the on the fly
	generation of stub classes. The library <code>asm.jar</code>, provided
	in the directory <code>lib</code> of <b>ProActive</b> is needed in
	order for any active object to function properly. If the library is not
	in the <code>CLASSPATH</code> you will get the following exception or a
	similar one :</p>
	<pre>    Exception in thread "main" java.lang.NoClassDefFoundError: org/objectweb/asm/Constants<br>        at java.lang.ClassLoader.defineClass0(Native Method)<br>        at java.lang.ClassLoader.defineClass(ClassLoader.java:509)<br>        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:123)<br>        at java.net.URLClassLoader.defineClass(URLClassLoader.java:246)<br>        at java.net.URLClassLoader.access$100(URLClassLoader.java:54)<br>        at java.net.URLClassLoader$1.run(URLClassLoader.java:193)<br>        at java.security.AccessController.doPrivileged(Native Method)<br>        at java.net.URLClassLoader.findClass(URLClassLoader.java:186)<br>        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)<br>        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:265)<br>        at java.lang.ClassLoader.loadClass(ClassLoader.java:262)<br>        at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:322)<br>        at org.objectweb.proactive.core.mop.MOP.&lt;clinit&gt;(MOP.java:88)<br>        at org.objectweb.proactive.ProActive.createStubObject(ProActive.java:836)<br>        at org.objectweb.proactive.ProActive.createStubObject(ProActive.java:830)<br>        at org.objectweb.proactive.ProActive.newActive(ProActive.java:255)<br>        at org.objectweb.proactive.ProActive.newActive(ProActive.java:180)<br>        at org.objectweb.proactive.examples.binarytree.TreeApplet.main(TreeApplet.java:103)<br></pre>

	<p class="textNormal">The problem can simply be fixed by adding asm<code>.jar</code>
	in the <code>CLASSPATH</code>.</p>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="bcel"> Why do I get an exception
	java.lang.NoClassDefFoundError about bcel? </a></h3>

	<p class="textNormal">ProActive uses <a
		href="http://jakarta.apache.org/bcel/">BCEL</a> for the on the fly
	generation of stub classes. The library <code>bcel.jar</code>, provided
	in the directory <code>lib</code> of <b>ProActive</b> is needed in
	order for any active object to function properly. If the library if not
	in the <code>CLASSPATH</code> you will get the following exception or a
	similar one :</p>
	<pre>    Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/bcel/generic/Type<br>        at org.objectweb.proactive.core.mop.MOPClassLoader.loadClass(MOPClassLoader.java:129)<br>        at org.objectweb.proactive.core.mop.MOPClassLoader.loadClass(MOPClassLoader.java:109)<br>        at org.objectweb.proactive.core.mop.MOP.createStubClass(MOP.java:341)<br>        at org.objectweb.proactive.core.mop.MOP.findStubConstructor(MOP.java:376)<br>        at org.objectweb.proactive.core.mop.MOP.createStubObject(MOP.java:443)<br>        at org.objectweb.proactive.core.mop.MOP.newInstance(MOP.java:165)<br>        at org.objectweb.proactive.core.mop.MOP.newInstance(MOP.java:137)<br>        at org.objectweb.proactive.ProActive.createStubObject(ProActive.java:590)<br>        at org.objectweb.proactive.ProActive.createStubObject(ProActive.java:585)<br>        at org.objectweb.proactive.ProActive.newActive(ProActive.java:170)<br>        at org.objectweb.proactive.ProActive.newActive(ProActive.java:137)<br>        at DiscoveryManager.main(DiscoveryManager.java:226)<br></pre>

	<p class="textNormal">The problem can simply be fixed by adding <code>bcel.jar</code>
	in the <code>CLASSPATH</code>.</p>
	</li>
	<li class="textNormal">
	<h3><a name="javaSecurity"> Why do I get an exception
	java.security.AccessControlException access denied? </a></h3>
	<p class="textNormal">If you don't properly set permissions when
	launching code using ProActive you may get the following exception or a
	similar one.</p>
	<pre>    java.security.AccessControlException: access denied (java.net.SocketPermission 127.0.0.1:1099 connect,resolve)<br>        at java.security.AccessControlContext.checkPermission(AccessControlContext.java:270)<br>        at java.security.AccessController.checkPermission(AccessController.java:401)<br>        at java.lang.SecurityManager.checkPermission(SecurityManager.java:542)<br>        at java.lang.SecurityManager.checkConnect(SecurityManager.java:1044)<br>        at java.net.Socket.connect(Socket.java:419)<br>        at java.net.Socket.connect(Socket.java:375)<br>        at java.net.Socket.&lt;init&gt;(Socket.java:290)<br>        at java.net.Socket.&lt;init&gt;(Socket.java:118)<br>        at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(RMIDirectSocketFactory.java:22)<br>        at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(RMIMasterSocketFactory.java:122)<br>        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(TCPEndpoint.java:562)<br>        at sun.rmi.transport.tcp.TCPChannel.createConnection(TCPChannel.java:185)<br>        at sun.rmi.transport.tcp.TCPChannel.newConnection(TCPChannel.java:171)<br>        at sun.rmi.server.UnicastRef.newCall(UnicastRef.java:313)<br>        at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)<br>        at org.objectweb.proactive.core.rmi.RegistryHelper.detectRegistry(RegistryHelper.java:101)<br>        at org.objectweb.proactive.core.rmi.RegistryHelper.getOrCreateRegistry(RegistryHelper.java:114)<br>        at org.objectweb.proactive.core.rmi.RegistryHelper.initializeRegistry(RegistryHelper.java:77)<br>        at org.objectweb.proactive.core.node.rmi.RemoteNodeFactory(RemoteNodeFactory.java:56)<br>        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)<br>        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)<br>        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)<br>        at java.lang.reflect.Constructor.newInstance(Constructor.java:274)<br>        at java.lang.Class.newInstance0(Class.java:296)<br>        at java.lang.Class.newInstance(Class.java:249)<br>        at org.objectweb.proactive.core.node.NodeFactory.createNodeFactory(NodeFactory.java:281)<br>        at org.objectweb.proactive.core.node.NodeFactory.createNodeFactory(NodeFactory.java:298)<br>        at org.objectweb.proactive.core.node.NodeFactory.getFactory(NodeFactory.java:308)<br>        at org.objectweb.proactive.core.node.NodeFactory.createNode(NodeFactory.java:179)<br>        at org.objectweb.proactive.core.node.NodeFactory.createNode(NodeFactory.java:158)<br>        ...<br></pre>



	<p class="textNormal">ProActive uses <a
		href="http://java.sun.com/products/jdk/rmi/">RMI</a> as its underlying
	transport technology. Moreover it uses code downloading features to
	automatically move generated stub classes from one JVM to another one.
	For those reasons, ProActive needs to install a <code>SecurityManager</code>
	that controls the execution of the Java code based on a set of
	permissions given to the JVM. Without explicit permissions nothing is
	granted for the code running outside <code>java.*</code> or <code>sun.*</code>
	packages. <br>
	See Permissions in the <a
		href="http://java.sun.com/j2se/1.3/docs/guide/security/permissions.html">JavaTM
	2 SDK</a> to learn more about Java permissions. <br>
	As a first approximation, in order to run your code, you can create a
	simple policy file granting all permissions for all code :</p>
	<pre>    grant {<br>        permission java.security.AllPermission;<br>    };<br></pre>



	<p class="textNormal">Then you need to start your Java program using
	the property <code>-Djava.security.policy</code>. For instance :</p>
	<pre>    java -Djava.security.policy=my.policy.file MyMainClass<br></pre>

	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="win"> Why examples and compilation do not work under
	Windows? </a></h3>

	<p class="textNormal">It happens quite often, that the default
	installation directory under Windows is under Program Files which
	contains space. Then setting the JAVA_HOME environment variable to the
	install directory, might be a problem for bat files(all windows
	examples, and compilation are ran with bat files). To get rid of those
	problems, the best thing is to install jdk in a directory whose name
	does not contain spaces such as C:\java\j2sdk.... or D:\java\j2sdk...
	and then to set the JAVA_HOME environment variable accordingly: set
	JAVA_HOME=C:\java\j2sdk... Another solution is to do a copy paste of
	the command defined in the bat file in the DOS window.</p>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<li class="textNormal">
	<h3><a name="nodeCreation"> How does the node creation happen ? </a></h3>
	<p class="textNormal">An active object is always attached to a node. A
	node represents a logical entity deployed onto one JVM. When creating a
	new active object you have to provide a URL or a reference to a node.
	That node has to exist at the moment you create the active object. It
	has to be launched on a local or on a remote JVM. In order to be
	accessible from any remote JVM, a node automatically registers itself
	in the local RMI Registry on the local machine. Getting a reference to
	a remote node ends up doing a lookup into a RMI registry. The class <code><a
		href="../core/node/NodeFactory.html">NodeFactory</a></code> provides a
	method <code>getNode</code> for doing that.</p>

	<p class="textNormal">In order to start a node you can use the script <code>startNode</code>
	located in the <code>scripts</code> directory in the sub-directory <code>windows</code>
	or <code>unix</code>. At the moment, <code>startNode</code> can only
	start a node on the local machine. It is not possible to start a remote
	node using startNode. The reason is that starting a node on a remote
	host implies the use of protocol such as RSH, SSH or rLogin that are
	platform dependant and that cannot be easily abstracted from java. We
	are working on that area at the moment with the XML-based deployment
	descriptor that will allow the remote creation of nodes using various
	protocol.</p>

	<p class="textNormal">It is nevertheless possible to create an object
	on a remote node once it is created. On host X you can use startNode to
	start a new node</p>

	<pre>   startNode.sh ///node1<br></pre>

	<p class="textNormal">On host Y you can create an active object on host
	X</p>

	<pre>  org.objectweb.proactive.core.node.Node n = org.objectweb.proactive.core.node.NodeFactory.getNode("//X/node1");<br>  ProActive.turnActive(myObject, n);<br></pre>

	<p class="textNormal">You do not need to start any rmiregistry manually
	as they are started automatically as needed.</p>

	<p class="textNormal">As we support other ways of registration and
	discovery (such as Jini), getting a node can be protocol dependant. For
	instance, the url of a node <code>jini://host.org/node</code> won't be
	accessed the same way as <code>rmi://host.org/node</code>. The class <code><a
		href="../core/node/NodeFactory.html">NodeFactory</a></code> is able to
	read the protocol and to use the right way to access the node.</p>

	<p class="textNormal">When an active object is created locally without
	specifying a node, it is automatically attached to a default node. The
	default node is created automatically by <b>ProActive</b> on the local
	JVM when a first active object is created without a given node. The
	name of the default node is generated based on a random number.</p>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="rmiregistryCreation"> How does the RMI Registry creation
	happen ? </a></h3>

	<p class="textNormal"><b>ProActive</b> relies on the RMI Registry for
	registering and discovering nodes. For this reason, the existence of a
	RMI Registry is necessary for <b>ProActive</b> to be used. In order to
	simplify the deployment of <b>ProActive</b> applications, we have
	included the creation of the RMI Registry with the creation of nodes.
	Therefore, if no RMI Registry exists on the local machine, <b>ProActive</b>
	will automatically create one. If one exists, <b>ProActive</b> will
	automatically use it.</p>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="classServer"> What is the class server, why do we need it
	? </a></h3>
	<p class="textNormal">In the RMI model, a class server is a HTTP Server
	able to answer simple HTTP requests for getting class files. It is
	needed in the case an object being sent to a remote location where the
	class the object belongs to is unknown. In such case, if the property <code>java.rmi.server.codebase</code>
	has been set properly to an existing class server, RMI will attempt to
	download the missing class files.</p>

	<p class="textNormal">Because <b>ProActive</b> makes use of on-the-fly,
	in memory, generated classes (the stubs), a class server is necessary
	for each JVM using active objects. For this reason, <b>ProActive</b>
	starts automatically one small class server per JVM. The launching and
	the use of this class server is transparent to you.</p>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>

	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="reifiable"> What is a reifiable object ? </a></h3>

	<p class="textNormal">An object is said to be reifiable if it meets
	certain criterias in order to become an Active Object:</p>
	<ul>
		<li>The object is not of primitive type</li>
		<li>The class of the object is not final</li>
		<li>The object has a constructor with no arguments</li>
	</ul>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="body"> What is the body of an active object ? What are its
	local and remote representations ? </a></h3>
	<p class="textNormal">When created, an active object is associated with
	a Body that is the entity managing all the non functional properties of
	the active object. The body contains the request queue receiving all
	reified method calls to the reified object (the object from which the
	active object has been created). It is responsible for storing pending
	requests and serving them according to a given synchronization policy,
	which default behavior is FIFO.</p>

	<p class="textNormal">The body of the active object should be the only
	object able to access directly the reified object. All other objects
	accessing the active object do so through the stub-proxy couple that
	eventually sends a request to the body. The body owns its own thread
	that represent the activity of the active object.</p>

	<p class="textNormal">The body has two representations. One is local
	and given by the interface <a href="../Body.html">Body</a>. This is the
	local view of the body an object can have when being in the same JVM as
	the body. For instance, the implementation of the activity of an object
	done through the method <code>runActivity(Body)</code> of the interface
	<code><a href="../RunActive.html">RunActive</a></code> sees the body
	locally as it is instantiated by the body itself. The other
	representation, given by the interface <a
		href="../core/body/UniversalBody.html">UniversalBody</a>, is remote.
	It represents the view of the body a remote object can have and
	therefore the methods that can be invoked. That view is the one used by
	the proxy of a remote reference to the active object to send request to
	the body of the active object.</p>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="stub"> What is a ProActive stub ? </a></h3>
	<p class="textNormal">When you create an active object from a regular
	object, you get in return a reference on an automatically generated <b>ProActive</b>
	stub. <b>ProActive</b> uses <a href="http://asm.objectweb.org/">ASM</a>
	to generate the stub on the fly. Suppose you have a class <code>A</code>
	and an instance <code>a</code> of this class. A way to turn the
	instance <code>a</code> into an active object is to use the method <code>ProActive.turnActive</code>
	:</p>

	<pre>    A a = new A();<br>    A activeA = (A) ProActive.turnActive(a);<br></pre>

	<p class="textNormal">In the code above, the variable <code>a</code> is
	a direct reference onto the instance of <code>A</code> stored somewhere
	in memory. In contrast, the variable <code>activeA</code> is a direct
	reference onto an instance of the generated ProActive stub for the
	class <code>A</code>. By convention, the ProActive stub of a class <code>A</code>
	is a class generated in memory by ProActive that inherit from <code>A</code>
	and that is stored in the package <code>pa.stub</code> as <code>pa.stub.Stub_A</code>.
	The ProActive stub of a class redefines all public methods to reify
	them through a generic proxy. The proxy changes all method calls into
	requests that are sent to the body associated to the reified object
	(the object pointed by <code>a</code> in our example).</p>

	<p class="textNormal">The reified object can be indifferently in the
	same virtual machine as the active reference or in another one.</p>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="stubProperties"> Why my object's properties aren't updated
	? </a></h3>

	<p class="textNormal">Suppose you have a class <code>A</code> with an
	attribute <code>a1</code> as the example below.</p>

	<pre>    public class A {<br><br>      public int a1;<br><br>      public static void main(String[] args) {<br>        A a = new A();<br>        A activeA = (A) ProActive.turnActive(a);<br>        a.a1 = 2;       // set the attribute a1 of the instance pointed by a to 2<br>        activeA.a1 = 2; // !!! set the attribute a1 of the stub instance to 2<br>      }<br>    }<br></pre>

	<p class="textNormal">When you reference an active object, you always
	reference it through its associated stub (<a href="#stub">see
	definition of Stub</a>). The stub class inheriting from the reified
	class, it has also all its attributes. But those attributes are totally
	useless as the only role of the generated stub is to reify every public
	methods call into a request passed to the associated proxy. Therefore
	accessing directly the attributes of an active object through its
	active reference would result in accessing the attributes of the
	generated stub. This is certainly not the behavior one would expect.</p>

	<p class="textNormal">The solution to this problem is very simple : <b>active
	object's properties must be accessed through a public method</b>.
	Otherwise, you're accessing the local Stub's properties.</p>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="stubReference"> How can I pass a reference on an active
	object or the difference between <code>this</code> and <code>ProActive.getStubOnThis()</code>
	? </a></h3>

	<p class="textNormal">Suppose you have a class <code>A</code> that you
	want to make active. In <code>A</code> you want to have a method that
	returns a reference on that instance of <code>A</code> as the example
	below.</p>

	<pre>  public class A {<br>    public A getRef() {<br>      return this;  // !!!! THIS IS WRONG FOR AN ACTIVE OBJECT<br>    }<br>  }</pre>

	<p class="textNormal">There is indeed a problem in the code above. If
	an instance of <code>A</code> is created as, or turned into an active
	object, the method <code>getRef</code> will in fact be called through
	the <b>Body</b> of the active object by its active thread. The value
	returned by the method will be the direct reference on the reified
	object and not a reference on the active object. If the call is issued
	from another JVM, the value will be passed by copy and the result
	(assuming A is serializable) will be a deep copy of A with no links to
	the active object.</p>

	<p class="textNormal">The solution, if you want to pass a link to the
	active object from the code of the reified object, is to use the method
	<code>ProActive.getStubOnThis()</code>. This method will return the
	reference to the stub associated to the active object whose thread is
	calling the method. The correct version of the previous class is :</p>

	<pre>  public class A {<br>    public A getRef() {<br>      return ProActive.getStubOnThis(); // returns a reference on the stub<br>    }<br>  }<br></pre>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="create"> How can I create an active object ? </a></h3>

	<p class="textNormal">To create an active object you invoke one of the
	methods <code>newActive</code> or <code>turnActive</code> of the <code><a
		href="../ProActive.html">ProActive</a></code> class. <code>ProActive.newActive</code>
	creates an active object based on the instantiation of a new object, <code>ProActive.turnActive</code>
	creates an active object based on an existing object. The different
	versions of the same <code>newActive</code> or <code>turnActive</code>
	methods allow you to specify where to create the active object (which
	node) and to customize its activity or its body (see questions below).
	</p>

	<p class="textNormal">Here is a simple example creating an active
	object of class <code>A</code> in the local JVM. If the invocation of
	the constructor of class <code>A</code> throws an exception, it is
	placed inside an exception of type <code>ActiveObjectCreationException</code>.
	When the call to <code>newActive</code> returns, the active object has
	been created and its active thread is started.</p>

	<pre>  public class A {<br><br>    private int i;<br>    private String s;<br><br>    public A() {}<br><br>    public A(int i, String s) {<br>      this.i = i;<br>      this.s = s;<br>    }<br>  }<br><br>  // instance based creation <br>  A a;<br>  Object[] params = new Object[] { new Integer (26), "astring" };<br>  try {<br>    a = (A) ProActive.newActive(A.class.getName(), params);<br>  } catch (ActiveObjectCreationException e) {<br>    // creation of ActiveObject failed<br>    e.printStackTrace();<br>  }<br><br>  // object based creation<br>  A a = new A(26, "astring");<br>  try {<br>    a = (A) ProActive.turnActive(a);<br>  } catch (ActiveObjectCreationException e) {<br>    // creation of ActiveObject failed<br>    e.printStackTrace();<br>  }<br></pre>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="createMethods"> What are the differences between
	instantiation based and object based active objects creation ? </a></h3>
	<p class="textNormal">In <b>ProActive</b> there are two ways to create
	active objects. One way is to use <code>ProActive.newActive</code> and
	is based on the instantiation of a new object, the other is to use <code>ProActive.turnActive</code>
	and is based on the use of an existing object.</p>

	<p class="textNormal">When using instantiation based creation, any
	argument passed to the constructor of the reified object through <code>ProActive.newActive</code>
	is serialized and passed by copy to the object. This is because the
	model behind <b>ProActive</b> is uniform whether the active object is
	instantiated locally or remotely. The parameters are therefore
	guaranteed to be passed by copy to the constructor. When using <code>ProActive.newActive</code>
	you must make sure that the arguments of the constructor are <code>Serializable</code>.
	On the other hand, the class used to create the active object <b>does
	not need to be</b> <code>Serializable</code> even in the case the
	active object is created remotly.</p>

	<p class="textNormal">When using object based creation, you create the
	object that is going to be reified as an active object before hand.
	Therefore there is no serialization involved when you create the
	object. When you invoke <code>ProActive.turnActive</code> on the object
	two cases are possible. If you create the active object locally (on a
	local node), it will not be serialized. If you create the active object
	remotely (on a remote node), the reified object will be serialized.
	Therefore, if the <code>turnActive</code> is done on a remote node, the
	class used to create the active object this way <b>has to be</b> <code>Serializable</code>.
	In addition, when using <code>turnActive</code>, care must be taken
	that no other references to the originating object are kept by other
	objects after the call to turnActive. A direct call to a method of the
	originating object without passing by a ProActive stub on this object
	will break the model.</p>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="noArgsConstructor"> Why do I have to write a no-args
	constructor ? </a></h3>

	<p class="textNormal"><b>ProActive</b> automatically creates a
	stub/skeleton pair for your active objects. When the stub is instancied
	on the remote node, its constructor ascends the ancestors chain, thus
	calling its parent constructor [the active object]. So if you place
	initialization stuff in your no args constructor, it will be executed <b>on
	the stub</b>, which can lead to disastrous results!</p>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="activity"> How do I control the activity of an active
	object ? </a></h3>

	<h3>Defining Active Object Activity</h3>

	<p class="textNormal">When an active object is created from a given
	object, all method calls are sent as requests to the body
	(automatically associated to the active object). Those requests are
	stored in a queue waiting to be served. Serving those requests as well
	as performing some other work represent the activity of this active
	object. One can completely specify what will be this activity. The
	standard behavior is to serve all incoming requests one by one in a
	FIFO order.</p>
	<p class="textNormal">In addition to the activity, it is possible to
	specify what to do before the activity starts, and after it ends. The
	three steps are :</p>
	<ul>
		<li>the initialization of the activity (done only once)</li>
		<li>the activity itself</li>
		<li>the end of the activity (done only once)</li>

	</ul>


	<p class="textNormal">Three interfaces are used to define and implement
	each step :</p>
	<ul>
		<li class="textNormal"><a href="../InitActive.html">InitActive</a></li>
		<li class="textNormal"><a href="../RunActive.html">RunActive</a></li>
		<li class="textNormal"><a href="../EndActive.html">EndActive</a></li>

	</ul>


	<p class="textNormal">In case of a migration, an active object stops
	and restarts its activity automatically without invoking the init or
	ending phases. Only the activity itself is restarted.</p>

	<h3>Setting Active Object Activity</h3>

	<p class="textNormal">Two ways are possible to define each of the three
	phases of an active object.</p>

	<ul>
		<li class="textNormal">Implementing one or more of the three
		interfaces directly in the class used to create the active object</li>
		<li class="textNormal">Passing an object implementing one or more of
		the three interfaces in parameter to the method <code>newActive</code>
		or <code>turnActive</code> (parameter active in those methods)</li>

	</ul>



	<p class="textNormal">Note that the methods defined by those 3
	interfaces are guaranted to be called by the active thread of the
	active object.</p>

	<p class="textNormal">The algorithms that decide for each phase what to
	do are the following (<code>activity</code> is the eventual object
	passed as a parameter to <code>newActive</code> or <code>turnActive</code>)
	:</p>
	<b>InitActive</b> <pre>if activity is non null and implements InitActive<br>  we invoke the method initActivity defined in the object activity<br>else if the class of the reified object implements InitActive<br>  we invoke the method initActivity of the reified object<br>else<br>  we don't do any initialization<br></pre>
	<b>RunActive</b> <pre>if activity is non null and implements RunActive<br>  we invoke the method runActivity defined in the object activity<br>else if the class of the reified object implements RunActive<br>  we invoke the method runActivity of the reified object<br>else<br>  we run the standard FIFO activity<br></pre>
	<b>EndActive</b> <pre>if activity is non null and implements EndActive<br>  we invoke the method endActivity defined in the object activity<br>else if the class of the reified object implements EndActive<br>  we invoke the method endActivity of the reified object<br>else<br>  we don't do any cleanup<br></pre>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	<!--

 Question

--></li>
	<li class="textNormal">
	<h3><a name="implementActivity"> How do I implement the custom activity
	of an active object ? </a></h3>

	<p class="textNormal">As explained <a href="#activity">before</a>,
	there are two ways to define the activity of your active object</p>
	<ul>
		<li class="textNormal">Implementing one or more of the sub-interfaces
		of <code><a href="../Active.html">Active</a></code> directly in the
		class used to create the active object</li>
		<li class="textNormal">Passing an object implementing one or more of
		the sub-interfaces of <code><a href="../Active.html">Active</a></code>
		in parameter to the method <code>newActive</code> or <code>turnActive</code></li>

	</ul>



	<h3>Implementing the interfaces directly in the class used to create
	the active object</h3>

	<p class="textNormal">This is the easiest solution when you do control
	the class that you make active. Depending on which phase in the life of
	the active object you want to customize, you implement the
	corresponding interface (one or more) amongst <code><a
		href="../InitActive.html">InitActive</a></code>, <code><a
		href="../RunActive.html">RunActive</a></code> and <code><a
		href="../EndActive.html">EndActive</a></code>. Here is an example that
	has a custom initialization and activity.</p>

	<pre>  import org.objectweb.proactive.*;<br><br>  public class A implements InitActive, RunActive {<br>    private String myName;<br><br>    public String getName() {<br>      return myName;<br>    }<br><br>    // -- implements InitActive<br>    public void initActivity(Body body) {<br>      myName = body.getName();<br>    }<br><br>    // -- implements RunActive for serving request in a LIFO fashion<br>    public void runActivity(Body body) {<br>      Service service = new Service(Body);<br>      while (body.isActive()) {<br>        service.blockingServeYoungest();<br>      }<br>    }<br><br>    public static void main(String[] args) throws Exception {<br>      A a = (A) ProActive.newActive(A.class.getName,null);<br>      System.out.println("Name = "+a.getName());<br>    }<br>  }<br></pre>

	<h3>Passing an object implementing the interfaces when creating the
	active object</h3>

	<p class="textNormal">This is the solution to use when you do not
	control the class that you make active or when you want to write
	generic activities policy and reused them with several active objects.
	Depending on which phase in the life of the active object you want to
	customize, you implement the corresponding interface (one or more)
	amongst <code><a href="../InitActive.html">InitActive</a></code>, <code><a
		href="../RunActive.html">RunActive</a></code> and <code><a
		href="../EndActive.html">EndActive</a></code>. Here an example that
	has a custom activity.</p>

	<p class="textNormal">Compared to the solution above where interfaces
	are directly implemented in the reified class, there is one restriction
	here : you cannot access the internal state of the reified object.
	Using an external object should therefore be used when the
	implementation of the activity is generic enough not to have to access
	the member variables of the reified object.</p>

	<pre>  import org.objectweb.proactive.*;<br>  public class LIFOActivity implements RunActive {<br>    // -- implements RunActive for serving request in a LIFO fashion<br>    public void runActivity(Body body) {<br>      Service service = new Service(Body);<br>      while (body.isActive()) {<br>        service.blockingServeYoungest();<br>      }<br>    }<br>  }<br><br>  import org.objectweb.proactive.*;<br>  public class A implements InitActive {<br>    private String myName;<br><br>    public String getName() {<br>      return myName;<br>    }<br><br>    // -- implements InitActive<br>    public void initActivity(Body body) {<br>      myName = body.getName();<br>    }<br><br>    public static void main(String[] args) throws Exception {<br>      // newActive(classname, constructor parameter (null = none), <br>      //           node (null = local), active, MetaObjectFactory (null = default)<br>      A a = (A) ProActive.newActive(A.class.getName(), null, null, new LIFOActivity(), null);<br>      System.out.println("Name = "+a.getName());<br>    }<br>  }<br></pre>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<!--

 Question

-->
	<li class="textNormal">
	<h3><a name="liveAndActive"> What happened to the former <b>live()</b>
	method and <b>Active</b> interface ? </a></h3>
	<p class="textNormal">The former <code>Active</code> interface was
	simply a marker interface allowing to change the body and/or the proxy
	of an active object. It was of no use most of the time and was made
	obsolete with the introduction of the <a
		href="../core/body/MetaObjectFactory.html">MetaObjectFactory</a> in
	the <b>0.9.3</b> release</p>

	<p class="textNormal">Up to <b>ProActive 0.9.3</b> the activity of an
	active object was given by a method <code>live(Body)</code> called by
	reflection of the reified object. Doing this way didn't allow compile
	time type checking of the method, was using reflection, didn't allow to
	externalize from the reified object its activity, didn't allow to give
	a custom activity to an active object created using <code>turnActive</code>.
	We addressed all those issues using the new mechanism based on the
	three interfaces <code><a href="../InitActive.html">InitActive</a></code>,
	<code><a href="../RunActive.html">RunActive</a></code> and <code><a
		href="../EndActive.html">EndActive</a></code>.</p>

	<p class="textNormal">In order to convert the code of an active object
	containing a method <code>live</code> to the new interface you just
	need to :</p>
	<ul>
		<li>implement the new interface <code><a href="../RunActive.html">RunActive</a></code>
		(and remove <code>Active</code> if it was implemented)</li>
		<li>changed the name of the method <code>live</code> to <code>runActivity</code></li>

	</ul>


	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>

	<li class="textNormal">
	<h3><a name="asynch"> Are the call to an Active Object always
	asynchronous? </a></h3>
	<p class="textNormal">No. Calls to an Active Object methods are
	asynchronous under some conditions. This is explained <a
		href="FutureObjectCreation.html">here</a>. If for instance the return
	type of a method call is not reifiable, you can use wrappers to keep
	asynchronism capabilities: suppose that one of your object has a method</p>
	<pre><b> int</b> getNumber()</pre>
	<p class="textNormal">calling this method with ProActive is sychronous
	since int type is not reifiable. To keep the asynchronism it is advised
	to use</p>
	<pre><b>MyInteger </b>getNumber()</pre>
	<p class="textNormal">where</p>
	<pre> public class MyInteger{

  protected int i;

  public MyInteger(){
  //empty constructor with no-args
  }
 
  public MyInteger(int i){
  this.i = i;
  }
 
  public int get{
   return i;
  }
 
}</pre>
	<p class="textNormal">In that case call to this method is asynchronous.
	Only the methods return type are concerned not the parameters.</p>


	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>


	<li class="textNormal">
	<h3><a name="future"> Why should I avoid to return null in methods body
	? </a></h3>

	<p class="textNormal">On the <b>caller</b> side the test <b>if(result_from_method
	== null)</b> has no sense. Indeed result_from_method is a couple
	Stub-FutureProxy as explained above, so even if the method returns
	null, result_from_method cannot be null:</p>
	<pre>public class MyObject{

 public MyObject(){
 //empty constructor with no-args
 }
 
 public Object getObject{
 if(.....) {
 return new Object();
 }
 else {
   return null; --> to avoid in ProActive
  }
 }
 
}</pre> On the caller side: <pre>
MyObject o = new MyObject();
Object result_from_method = o.getObject();
if(result_from_method == null){
......
}
</pre> This test is never true, indeed, result_from_method is <b>Stub-->Proxy-->null</b>
	if the future is not yet available or the method returns null or <b>Stub-->Proxy-->Object</b>
	if the future is available, but result_from_method is <b>never null</b>.
	see <a href="FutureObjectCreation.html#commonerror">Future
	documentation</a> for more documentation about common errors to avoid <!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>
	<li class="textNormal">
	<h3><a name="JiniUse"> How can I use <b>Jini </b> in ProActive ? </a></h3>

	<p class="textNormal">In order to use <b>Jini </b>in ProActive you have
	to configure properly the deployment descriptor. All informations on
	how to configure XML deployment descriptor are provided <a
		href="Descriptor.html">here</a></p>
	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>

	<li class="textNormal">
	<h3><a name="JiniPb"> Why do I get an exception when using <b>Jini </b>?
	</a></h3>

	<p class="textNormal">In order to get <b>Jini </b> working properly in
	ProActive, you have to put in your HOME directory a copy of
	proactive.java.policy located in ProActive/scripts/unix or windows.
	Indeed the rmid deamon needs this file to start. If you try to use Jini
	without this policy file, it will not work. Moreover, if you did it
	once, make sure that there is no file called machine_namejiniLockFile
	in your working directory. This file is usefull to avoid many Service
	Lookup to be created by concurrent threads. This file is removed
	automatically when a Lookup Service is created. If the application
	failed(for instance because of the policy file) it is possible that
	this file remains in the directory, in that case if you restart the
	application it will not work. So checkout if this file is present in
	your working directory, if so remove it and restart the application</p>

	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>

	<li class="textNormal">
	<h3><a name="config"> What is the difference between passing parameters
	in Deployment Descriptor and setting properties in ProActive
	Configuration file? </a></h3>
	<p class="textNormal"></p>
	Parameters defined in Deployment Descriptor should be only jvm related,
	whereas properties set in the Configuration file are ProActive
	properties or user-defined properties. They are used with a different
	approach: parameters given in descriptors are part of the java command
	that will create other jvms, whereas properties will be loaded once
	jvms are created <!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>

	<li class="textNormal">
	<h3><a name="valid_error"> Why do I get the following message when
	parsing my xml deployment file: <br>
	ERROR: file:~/ProActive/descriptor.xml Line:2 Message:cvc-elt.1: Cannot
	find the declaration of element 'ProActiveDescriptor' </a></h3>

	<p class="textNormal"></p>
	This message turns up because the Schema cannot be found. Indeed at the
	beginning of our XML deployment files we put the line<br>
	<b>&lt;ProActiveDescriptor
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="DescriptorSchema.xsd"&gt;</b><br>
	which means, the schema named DescriptorSchema.xsd is expected to be
	found in the current directory to validate the xml. Be sure you have
	this file in the same dir than your file, or just change the path to
	point to the correct schema. <!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>

	<li class="textNormal">
	<h3><a name="AO2comp"> How do I make a Component version out of an
	Active Object version ?</a></h3>
	<p class="textNormal">There is such an example, in the
	examples/components/c3d directory. The code for c3d is adapted to use
	components. <br>
	There are several steps to cover:</p>
	<ol>
		<li>Make sure you have made interfaces for the objects which are to be
		made components. This is needed to be able to do the binding between
		components</li>
		<li>Replace the references to Active Object classes by their
		interfaces</li>
		<li>Create a component wrapper for each Active Object which should
		appear as a component. It should contain the binding behavior
		(bindFc,unbindFc,listFc,lookupFc methods), and maybe handle attribute
		modification.</li>
		<li>Create a main calss where the compoents are created then bound, or
		use an ADL file to do so.</li>
	</ol>


	<!-- separation link -->
	<p align="center"><tt>[<a href="#top">Top</a>] [<a href="#list">Questions</a>]
	[<a href="#answers">Answers</a>]</tt></p>
	</li>

	<!--
 Footer : start 
~~~ -->
</ol>
<br>
<hr>
<div align="right" class="textSmall">Copyright &copy;  2001-2005INRIA
All Rights Reserved. <!-- Footer : end --></div>
<br>
</body>
</html>
