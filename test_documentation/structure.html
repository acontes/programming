<!DOCTYPE HTML PUBLIC "-//IETF//Dtd HTML//EN"><html><head><title>ProActive Test Suite API</title>
    
<link rel="stylesheet" href="Files/ProActive.css"></head>

  <body bgcolor="#ffffff">
<table width="100%">
  <tbody><tr> 
    <td align="left" valign="middle"> <table cellpadding="2" cellspacing="0" border="1">
        <tbody><tr> 
          <td class="smallLink1">&nbsp;&nbsp;<a class="smallLink1" href="index.html">back 
to index</a>&nbsp;&nbsp;</td>
          <td class="smallLink2">&nbsp;&nbsp;<a class="smallLink2" href="introduction.html">prev</a>&nbsp;&nbsp;</td>
          <td class="smallLink2">&nbsp;&nbsp;<a class="smallLink2" href="timer.html">next</a>&nbsp;&nbsp;</td>
        </tr>
      </tbody></table></td>
    <td align="right" valign="top"> <a href="http://www-sop.inria.fr/oasis/ProActive/"><img src="Files/ProActiveLogo200x34.gif" width="200" height="34" border="0"></a> 
    </td>
  </tr>
</tbody></table>
<hr>
<h1>0.1 Structure of the API</h1>

<h2>Goals of the API</h2>

    <ul>
      <li>Benchmarks on ProActive</li>
      <li>Functional Tests framework</li>
      <li>Interlinked Tests</li>
      <li>Automatic results generation</li>
    </ul>

    <h2>Functional Tests &amp; Benchmarks</h2>

    <h3>Test definition</h3>
    <p>A Test runs successfully of :</p>
    <ul>
      <li>Its <b>Pre-Conditions</b> are verified</li>
      <li>Its <b>action</b> method runs with no Java Exception</li>
      <li>Its <b>Post-Conditions</b> are also verified</li>
    </ul>

    <h3>Benchmark definition</h3>
    <p>Benchmark is a Test, its result is a time.</p>

    <h3>Interlinked Functional Tests</h3>
    <p>First, we specify parents Tests.</p>
    <p>To do this, just overload Action method with needed inputs and
      outputs, after, with the Java reflection mechanism we found the
      first good Action method to execute the Test.</p>

    <h4>Mechanism in details</h4>
    <p>In standalone mode the test runs with this method :</p>
<pre><code>
void action() throws Exception;
</code></pre>
    <p>In interlinked mode, the developer must to add a similar method
      in his code Test :</p>
<pre><code>
A action(B toto, C tutu, &#8230;) throws Exception;
</code></pre>
<p>Where <i>toto</i> is the result output of the first parent of this
      test and <i>tutu</i> the result output of second parent, &#8230;
      <i>A</i> is the type of result output of this Test.</p>

    <h5>Reflection code</h5>
<p>Find the first action method :</p>
<pre><code>
 Method[] methods = getClass().getMethods();
            Method actionWithParams = null;
            for (int i = 0; i < methods.length; i++) {
                if ((methods[i].getName().compareTo("action") == 0) &&
                        (methods[i].getReturnType().getName().compareTo("void") != 0)) {
                    actionWithParams = methods[i];
                    break;
                }
            }
</code></pre>
<p>Array of params type :</p>
<pre><code>
            if (actionWithParams != null) {
                Object[] args = null;
                if (tests != null) {
                    args = new Object[tests.length];
                    for (int i = 0; i < tests.length; i++)
                        args[i] = tests[i].getOut();
                } else {
                    args = new Object[1];
                    args[0] = null;
                }
</code></pre>
<p>Call the method :</p>
<pre><code>
out = actionWithParams.invoke(this, args);
</code></pre>

    <h2>Group</h2>
<p>What is a Group of Tests ?</p>

    <ul>
      <li>Collection of Tests</li>
    </ul>
<p>What is the role of a Group?</p>

    <ul>
      <li>Initialise and cleanup all Tests</li>
      <li>Collect Results</li>
      <li>Add, remove, &#8230; Tests like a Java Collection</li>
    </ul>

    <h2>Manager</h2>
<p>What is a Manager in Testsuite API ?</p>
    <ul>
      <li>Collection of Groups</li>
    </ul>
<p>What is the role of a Manager?</p>

    <ul>
      <li>Initialise and launch all Tests</li>
      <li>Collect and format Results</li>
    </ul>
<p>We have different types of Manager to better manage of specialised
      Tests or Benchmarks :</p>
    <ul>
      <li>BenchmarkManager</li>
      <li>ProActiveBenchManager</li>
      <li>FunctionalTestManager</li>
      <li>ProActiveFuncTestManager</li>
    </ul>


    <h2>Diagram of classes</h2>

<p>The follow image presents the main structure of the API :</p>
<img align="center" src="Files/general.gif">

<p>Classes details :</p>

    <img align="center" src="Files/details.gif">

    <p>General structure at runtime :</p>

<img align="center" src="Files/execution.gif">

    <p>Test classes diagram :</p>

<img align="center" src="Files/test.gif">

</body></html>
