<!DOCTYPE HTML PUBLIC "-//IETF//Dtd HTML//EN"><html><head><title>ProActive Test Suite API</title>

<link rel="stylesheet" href="Files/ProActive.css"></head>

  <body bgcolor="#ffffff">
<table width="100%">
  <tbody><tr>
    <td align="left" valign="middle"> <table cellpadding="2" cellspacing="0" border="1">
        <tbody><tr>
          <td class="smallLink1">&nbsp;&nbsp;<a class="smallLink1" href="index.html">back
to index</a>&nbsp;&nbsp;</td>
          <td class="smallLink2">&nbsp;&nbsp;<a class="smallLink2" href="structure.html">prev</a>&nbsp;&nbsp;</td>
          <td class="smallLink2">&nbsp;&nbsp;<a class="smallLink2" href="format.html">next</a>&nbsp;&nbsp;</td>
        </tr>
      </tbody></table></td>
    <td align="right" valign="top"> <a href="http://www-sop.inria.fr/oasis/ProActive/"><img src="Files/ProActiveLogo200x34.gif" width="200" height="34" border="0"></a>
    </td>
  </tr>
</tbody></table>
<hr>
<h1>0.2 Timer for the Benchmarks</h1>

    <p>
      In this API, it is the benchmark programmer who make the measure, he
      can simply use : <i>System.currentTimeMillis()</i> of Java. This
      method is in the wrong !
    </p>
    <p>
      If you want to change the method to make measure you must to
      modify the code of all your Benchmarks.
    </p>

    <h2>The solution</h2>

    <p>To solve this problem, we have choose an interface :
      <i>Timeable</i></p>

    <pre><code>
package testsuite.timer;

public interface Timeable {
    // Start the timer
    public void start();

    // Stop the timer
    public void stop();

    // Get the total time, measured
    public long getCumulatedTime();

    // To print the time unit
    public String getUnit();
}
    </code></pre>

    <p>By default the API provides two timer which of implement this
      interface :</p>
    <p>To make measure in milliseconds :
      <i>testsuite.timer.ms.MsTimer</i></p>
    <p>To make measure in microseconds :
      <i>testsuite.timer.micro.MicroTimer</i></p>

    <p>By implementing the interface you can easily create new timer for
      more performents for you needs.</p>

    <h2>How to use Timer in Benchmarck ?</h2>

    <p>Use <b>this.timer</b> like this :</p>

    <pre><code>
public long action() throws Exception {
        String className = ReifiableObject.class.getName();
        Node node = getNode();
        this.timer.start();
        object = (ReifiableObject) ProActive.newActive(className, null, node);
        this.timer.stop();
        return this.timer.getCumulatedTime();
    }
    </code></pre>

    <h2>How to configure the Manager with your Timer ?</h2>

    <p>By a prop file or a XML file :</p>
    <pre><code>
	&lt;prop key="Timer" value="testsuite.timer.micro.MicroTimer"/&gt;
	
	Timer=testsuite.timer.micro.MicroTimer
    </code></pre>

    <p>Or by the code :</p>

    <pre><code>
	yourManager.setTimer("class.name.YourTimer");
    </code></pre>



</body></html>
