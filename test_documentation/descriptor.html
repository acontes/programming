<!DOCTYPE HTML PUBLIC "-//IETF//Dtd HTML//EN">
<html>
<head>
  <title>ProActive Test Suite API</title>
  <link rel="stylesheet" href="Files/ProActive.css">
</head>
<body bgcolor="#ffffff">
<table width="100%">
  <tbody>
    <tr>
      <td align="left" valign="middle">
      <table cellpadding="2" cellspacing="0" border="1">
        <tbody>
          <tr>
            <td class="smallLink1">&nbsp;&nbsp;<a class="smallLink1"
 href="index.html">back
to index</a>&nbsp;&nbsp;</td>
            <td class="smallLink2">&nbsp;&nbsp;<a class="smallLink2"
 href="logs.html">prev</a>&nbsp;&nbsp;</td>
            <td class="smallLink2">&nbsp;&nbsp;<a class="smallLink2"
 href="extends.html">next</a>&nbsp;&nbsp;</td>
          </tr>
        </tbody>
      </table>
      </td>
      <td align="right" valign="top"> <a
 href="http://www-sop.inria.fr/oasis/ProActive/"><img
 src="Files/ProActiveLogo200x34.gif" width="200" height="34" border="0"></a>
      </td>
    </tr>
  </tbody>
</table>
<hr>
<h1>0.5 Configuration File<h1>

<h2>How many configuration files you need ?</h2>

<ul>
	<li>You can have just no file.</li>
	<li>One file to configure the Manager.</li>
	<li><b>One file for the Manager and all its Tests (recommended).</b></li>
	<li>One file for the Manager and one file for each Tests.</li>
	<li>No file for the Manager and one file for each Tests.</li>
</ul>

<h2>A simple Java Properties file</h2>

    <p>
      With this file you can configure Manager's properties and Tests
      properties. You can have just one file for the Manager and all
      Tests or just one for the Manager and one file for each Tests.
    </p>
    <p>
      By default the name of this file is the class name of the
      Manager or the Test which it is associated with <i>.prop</i> as
      file extention. For example :
     </p>
     <p>
      <i> ManagerToto.class <-> ManagerToto.prop</i>
     </p>

<h3>How to use it ?</h3>
    <p>It is very simple to use it. Just do like this example :</p>
    <p>You have a private variable in your Manager or Test :</p>
    <pre><code>private int packetSize = 1024;</code></pre>
    <p>First add a setter of which it take a <b>String</b> in input
      :</p>
    <pre><code>
	public void setPacketSize(String value){
	  this.packetSize = Integer.parseInt(value);
	}
    </code></pre>
    <p>Next, int the prop file :</p>
    <pre><code>
	PacketSize=2048
     </code></pre>
    <p><b>Warning : </b> the key in the prop file must be the same of
      the setter name without the prefix set.</p>
    <p>Now, to load the prop file :</p>
    <pre><code>
	// Level : Manager

	// At the execution load properties
	manager.execute(yes);

	// To load properties from differents  types of sources
	manager.loadAttributes();
	manager.loadAttributes(java.io.File propFile);
	manager.loadAttributes(java.util.Properties javaProp);

	// Level : Test
	
	// To load properties from differents  types of sources
	test.loadAttributes();
	test.loadAttributes(java.io.File propFile);
	test.loadAttributes(java.util.Properties javaProp);
      </code></pre>

    <h2>A XML properties file</h2>
    <p>To configure all from just one file.</p>
    <p>Like a simple prop file this one must be have the same name of
      the Manager class :</p>
    <pre><code>
	YourManager <-> YourManager.xml
     </code></pre>
    <h3>The structure of the XML document</h3>
    <pre><code>
            &lt;Manager&gt;
	   &lt;name&gt;A Manager &lt;/name&gt;
	   &lt;description&gt;Try XML descriptor file. &lt;/description&gt;
	   &lt;!-- by default nbRuns is 1, but for benchmarks you can
	  change it --&gt;
	   &lt;nbRuns&gt;100 &lt;/nbRuns&gt;
            &lt;/Manager&gt;
      </code></pre>

    <h3>Add a simple group of tests</h3>
    <pre><code>
	 &lt;simpleGroup name="A simple Group" description="just for test."&gt;
	     &lt;unitTest class="test.objectcreation.TestNewActive"/&gt;
	     &lt;unitTest class="test.groupmigration.TestGroupCreation"/&gt;
	     &lt;unitTest class="test.groupmigration.TestGroupCreation"/&gt;
	     &lt;unitTest class="test.objectcreation.TestNewActive"/&gt;
             &lt;/simpleGroup&gt;
    </code></pre>
    <p>You have created a group with 4 tests.</p>

    <h3>Add a group from a Java package</h3>
    <pre><code>
  &lt;packageGroup name="A Package Group" description="Construct Group from  package." 
		dir="/net/home/adicosta/workspace/ProActive/classes" 
		packageName="nonregressiontest" &gt;
 &lt;/packageGroup&gt;
      </code></pre>
    <p>You have created a group with all Tests was found in the
      package <i>nonregressiontest</i></p>
    <p>With this method you don't have any order on Tests, but you can
      specify some order :</p>
    <pre><code>
 &lt;packageGroup name="A Package Group" description="Construct Group from  package." 
		dir="/net/home/adicosta/workspace/ProActive/classes" 
		packageName="nonregressiontest" &gt;
 &lt;unitTest class="nonregressiontest.runtime.defaultruntime.Test" /&gt;
			 &lt;unitTest class="nonregressiontest.node.nodefactory.Test" /&gt;
			 &lt;unitTest class="nonregressiontest.stub.stubgeneration.Test" /&gt;
			 &lt;unitTest class="nonregressiontest.stub.stubinterface.Test" /&gt;
			 &lt;unitTest class="nonregressiontest.activeobject.creation.local.newactive.Test" /&gt;
			 &lt;unitTest class="nonregressiontest.activeobject.creation.local.turnactive.Test" /&gt;
			 &lt;unitTest class="nonregressiontest.activeobject.creation.remote.newactive.Test" /&gt;
			 &lt;unitTest class="nonregressiontest.activeobject.creation.remote.turnactive.Test" /&gt;
 &lt;/packageGroup&gt;
      </code></pre>
<p>All classes in package nonregressiontest are added, only the specified
		tests are sorted.</p>

    <h3>Add a group of InterLinked Tests</h3>
    <pre><code>
 &lt;interLinkedGroup name="Group with interlinked tests" description="Construct a Group with interlinked tests"&gt;
	 &lt;!-- Declare the tests in the execution order --&gt;
 &lt;idTest class="test.groupmigration.TestGroupCreation" id="1"/&gt;
 &lt;idTest class="test.groupmigration.TestGroupMigration" id="2"/&gt;
 &lt;idTest class="test.groupmigration.TestGroupMessage" id="3"/&gt;
	 &lt;interLinks&gt;
		 &lt;link id="3"&gt;
		   &lt;parent id="1"/&gt;
		   &lt;parent id="2"/&gt;
		 &lt;/link&gt;
	   &lt;/interLinks&gt;
 &lt;/interLinkedGroup&gt;
</code></pre>
<p>TestGroupMessage depends from TestGroupCreation and
      TestGroupMigration.</p>

    <h3>How to configure log4j</h3>

<pre><code>
 &lt;log4j&gt;
/net/home/adicosta/log4j/config/file/path/log4j-file-config
 &lt;/log4j&gt;
</code></pre>

    <h3>How to configure results output ?</h3>
<p>Results in a text file :</p>
<pre><code>
 &lt;result type="text" file="/net/home/adicosta/tmp/results.txt" /&gt;
</code></pre>
<p>Results in a HTML file :</p>
<pre><code>
 &lt;result type="html" file="/net/home/adicosta/tmp/results.html" /&gt;
</code></pre>

<p>Results in the console :</p>
<pre><code>
 &lt;result type="console" /&gt;
</code></pre>

<p>Results in a XML file :</p>
<pre><code>
 &lt;result type="xml" file="/net/home/adicosta/tmp/results.xml"/&gt;
</code></pre>

<p>To execute all with the XML file configuration:</p>
<pre><code>
Manager manager = new Manager(java.io.File xmlConfigFile);
manager.execute();
</code></pre>

<h3>Configure properties</h3>

<p>Like in simple prop file :</p>
<pre><code>
	 &lt;properties&gt;
	   &lt;prop key="RemoteHostname" value="nahuel"/&gt;
        &lt;/properties&gt;
</code></pre>
</body>
</html>
