<?xml version="1.0" encoding="UTF-8"?>
<chapter id="IC2D">
  <title>IC2D: Interactive Control and Debugging of Distribution</title>

  <!--  File: /home/irosenbe/PA_new_doc/docbook-tuto/IC2D.html  -->

  <para><emphasis role="bold">IC2D</emphasis> is a <emphasis
  role="bold">graphical environment</emphasis> for remote monitoring and
  steering of <emphasis role="bold">distributed and grid
  applications</emphasis>. IC2D features <emphasis role="bold">graphical
  visualisation</emphasis> and <emphasis role="bold">drag and drop
  migration</emphasis> of remote objects. As it is being interfaced with
  <emphasis role="bold">Jini</emphasis> and <emphasis
  role="bold">Globus</emphasis>, it can also serve as a building block for
  <emphasis role="bold">grid</emphasis> and <emphasis role="bold">computing
  portals</emphasis>. <emphasis role="bold">IC2D</emphasis> is built on top of
  <emphasis role="bold">RMI</emphasis> and <emphasis
  role="bold">ProActive</emphasis> that provides asynchronous calls and
  migration.</para>

  <para><emphasis role="bold">The basic features of IC2D
  are:</emphasis></para>

  <table frame="box" rules="all">
    <caption></caption>

    <thead>
      <tr align="center">
        <th>Graphical Visualisation</th>
        <th>Textual Visualisation</th>
        <th>Control and Monitoring</th>
      </tr>
    </thead>

    <tbody>
      <tr>
       <td>Hosts, Java Virtual Machines, Active Objects</td>
       <td>Ordered list of messages</td>
       <td>Interactive control of mapping upon
          creation</td>
      </tr>

      <tr>
       <td>Topology: reference and communications</td>
       <td>Status: waiting for a request or for a
          data</td>
         <td>Interactive control of destination upon
          migration</td>
      </tr>
      <tr>
       <td>Status of active objects (executing, waiting,
          etc.)</td>
         <td>Causal dependencies between messages</td>
         <td>Dynamic change of deployment</td>
      </tr>
      <tr>
       <td>Migration of activities</td>
       <td>Related events (corresponding send and receive,
          etc.)</td>
         <td>>Drag and Drop migration of executing
          tasks</td>
      </tr>
    </tbody>
  </table>

  <para>The full source of IC2D is included in the distribution and is also
  browseable on line.</para>

  <para><ulink url="../doc/ProActive_src_html/index.xml">Source code
  index</ulink></para>

  <sect1 remap="h2">
    <title><anchor id="IC2D_html_visualisation" />Graphical Visualisation
    within IC2D</title>

    <para><emphasis role="bold">IC2D features graphical visualisation of
    hosts, Java Virtual Machines, and active objects, including the topology
    and volume of communications.</emphasis></para>

    <para>&nbsp;</para>

    <para><informalfigure>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/ic2d_c3d.png" format="PNG" width="6in" />
          </imageobject>
        </mediaobject>

        <ulink url="ic2d_c3d.jpg"></ulink>
      </informalfigure></para>
  </sect1>

  <sect1 remap="h2">
    <title><anchor id="IC2D_html_control" />Control within IC2D</title>

    <para><emphasis role="bold">IC2D permits to interactively and dynamically
    create new Jvms and Nodes.</emphasis></para>

    <para><informalfigure>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/RemoteControl.png" format="PNG"
                       width="6in" />
          </imageobject>
        </mediaobject>

        <ulink url="RemoteControl.jpg"></ulink>
      </informalfigure></para>

    <para><emphasis role="bold">A 'drag-and-drop' migration allows to
    graphically move running active objects between
    machines.</emphasis></para>

    <informalfigure>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/ic2d_migrate_witharrow.png" format="PNG"
                     width="6in" />
        </imageobject>
      </mediaobject>
    </informalfigure>

    <para><emphasis role="bold">IC2D permits to visualize related events and
    AOs state</emphasis></para>
  </sect1>

  <sect1 remap="h2">
    <title><anchor id="IC2D_html_applications" />Job monitoring and
    control</title>

    <para><anchor id="IC2D_html_JobMonitoringTag" /><emphasis role="bold">IC2D
    now provides a Job monitoring tool, in order to visualize and control high
    number of resources. This tool offers different views of a deployed
    application: per hosts, per jobs,.... To start the Job monitor tool,
    choose in the IC2D menu: windows --&gt; Show Job Monitor
    windows</emphasis></para>

    <informalfigure>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/jobmonitor2_logo.png" format="PNG"
                     width="6in" />
        </imageobject>
      </mediaobject>
    </informalfigure>

    <informalfigure>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/jobmonitor1_logo.png" format="PNG"
                     width="6in" />
        </imageobject>
      </mediaobject>
    </informalfigure>
  </sect1>

  <sect1 remap="h2">
    <title><anchor id="IC2D_html_launcher" />Launcher</title>

    <sect2 remap="h3">
      <title>Principles</title>

      <para>The launcher allows users to launch applications directly from an
      XML descriptor file, without any script. The new XML descriptor is
      nearly the same as classical descriptor files, the syntax is only
      extended. The deployment will be done in two different phasis.</para>

      <para>first, a new node, a "main node" will be created and activated and
      then, it is this node that will deploy the rest of the
      application.</para>
    </sect2>

    <sect2 remap="h3">
      <title>MainDefinition tag</title>

      <para>A new tag has been introduced, just before the component
      definition tag. This tag is named "mainDefinition" and its syntax is
      :</para>

      <screen> 
 &nbsp;&lt;mainDefinition id="mainID" class="theClassToLaunchContainingAMainMethod"&gt;
 &nbsp;&nbsp;&lt;arg value="param1"&gt; 
 &nbsp;&nbsp;&lt;arg value="param2"&gt;
 &nbsp;&nbsp;&lt;mapToVirtualNode value="main-Node"/&gt;
 &nbsp;&lt;/mainDefinition&gt;
</screen>

      <para>Eventually, several mains might be defined so the <emphasis
      role="bold">id</emphasis> allows to identify all mainDefinitions.</para>

      <para>The <emphasis role="bold">class</emphasis> attribute is the path
      where can be found the class to launch.</para>

      <para><emphasis role="bold">This class MUST contain a main
      method.</emphasis></para>

      <para>Then any number of parameters can be declared in <emphasis
      role="bold">arg</emphasis> tags. The parameters will be given to the
      main method in the same order the were declared.</para>

      <para>And finally a <emphasis role="bold">mapToVirtualNode</emphasis>
      tag will link the main info to virtual node, declared with the same name
      in the virtualNodeDefinitions tag (in componentDefinition).</para>

      <screen>
 &nbsp;&lt;?xml version="1.0" encoding="UTF-8"?&gt;
 &nbsp;&lt;ProActiveDescriptor xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:noNamespaceSchemaLocation="DescriptorSchema.xsd"&gt;
 &nbsp;&nbsp;&lt;!-- &lt;security file="../../descriptors/c3dPolicy.xml"&gt;&lt;/security&gt; --&gt; 
 &nbsp;&nbsp;&lt; componentDefinition&gt;
 &nbsp;&nbsp;&nbsp;&lt; virtualNodesDefinition&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; virtualNode name="Dispatcher"
 property="unique_singleAO"/&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; virtualNode name="Renderer"/&gt;
 &nbsp;&nbsp;&nbsp;&lt; /virtualNodesDefinition&gt;
 &nbsp;&nbsp;&lt; /componentDefinition&gt;
 &nbsp;&nbsp;&lt; deployment&gt;
 &nbsp;&nbsp;&nbsp;&lt; register virtualNode="Dispatcher"/&gt;
 &nbsp;&nbsp;&nbsp;&lt; mapping&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; map virtualNode="Dispatcher"&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; jvmSet&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; currentJVM/&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; /jvmSet&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; /map&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; map virtualNode="Renderer"&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; jvmSet&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; vmName value="Jvm1"/&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; vmName value="Jvm2"/&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; vmName value="Jvm3"/&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; vmName value="Jvm4"/&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; /jvmSet&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; /map&gt;
 &nbsp;&nbsp;&nbsp;&lt; /mapping&gt;
 &nbsp;&nbsp;&nbsp;&lt; jvms&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; jvm name="Jvm1"&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; creation&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; processReference
 refid="localJVM"/&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; /creation&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; /jvm&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; jvm name="Jvm2"&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; creation&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; processReference
 refid="localJVM"/&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; /creation&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; /jvm&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; jvm name="Jvm3"&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; creation&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; processReference refid="localJVM"/&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; /creation&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; /jvm&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; jvm name="Jvm4"&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; creation&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; processReference refid="localJVM"/&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; /creation&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; /jvm&gt;
 &nbsp;&nbsp;&nbsp;&lt; /jvms&gt;
 &nbsp;&nbsp;&lt; /deployment&gt;
 &nbsp;&nbsp;&lt; infrastructure&gt;
 &nbsp;&nbsp;&nbsp;&lt; processes&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; processDefinition id="localJVM"&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; jvmProcess class="org.objectweb.proactive.core.process.JVMNodeProcess"&gt;&lt;/jvmProcess&gt;
 &nbsp;&nbsp;&nbsp;&nbsp;&lt; /processDefinition&gt;
 &nbsp;&nbsp;&nbsp;&lt; /processes&gt;
 &nbsp;&nbsp;&lt; /infrastructure&gt;
 &nbsp;&lt;/ProActiveDescriptor&gt;
</screen>
    </sect2>

    <sect2 remap="h3">
      <title>API</title>

      <para>The Launcher class is located in the package <emphasis
      role="bold">org.objectweb.proactive.core.descriptor</emphasis>. To use
      it you will have to create a new instance of the launcher with the path
      of the XML descriptor (this descriptor must contain a <emphasis
      role="bold">mainDefinition tag</emphasis>). The constructor will parse
      the file and reify a ProActiveDescriptor. You only have to call the
      <emphasis role="bold">activate()</emphasis> method on the launcher
      instance to launch the application.</para>

      <para><emphasis role="underline">For
      example:</emphasis><literal>Launcher launcher = new Launcher
      ("myDescriptor.xml") ;</literal></para>

      <para><literal>launcher.activate() ;</literal></para>

      <para>you can also get the ProActiveDescriptor built by the launcher by
      calling the getDescriptor() method on the launcher instance.</para>

      <para><literal>ProActiveDescriptor pad = launcher.getDescriptor()
      ;</literal></para>
    </sect2>

    <sect2 remap="h3">
      <title>Launcher in IC2D</title>

      <para>You will find the launcher in the <emphasis role="bold">launcher
      menu</emphasis>, in the menu bar. Click then on <emphasis
      role="bold">launch a new application</emphasis>.</para>

      <para><informalfigure>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/launcher_menu.png" format="PNG"
                         width="6in" />
            </imageobject>
          </mediaobject>
        </informalfigure></para>

      <para>Now it opens a new window proposing you to browse your file system
      for a XML descriptor and load it into a descriptors list. A right click
      on the list items allows you to launch (activate) the application. Two
      checkbox control the graphical monitoring and textual job monitoring
      your application.</para>

      <para><informalfigure>
          <mediaobject>
            <imageobject>
              <imagedata fileref="images/launcher_frame.png" format="PNG"
                         width="6in" />
            </imageobject>
          </mediaobject>
        </informalfigure></para>

      <para>You can kill the applications launched with from a popupmenu in
      the "activated applications" table.</para>
    </sect2>
  </sect1>

  <sect1 remap="h2">
    <title><anchor id="IC2D_html_gridcomp" />Grid and cluster
    computing</title>

    <para><emphasis role="bold">As ProActive is interfaced with Globus and
    LSF, IC2D permits to interactively control and debug applications that
    execute on intercontinental-wide networks.</emphasis> Below is C3D
    application deployed with JINI and RMI protocol between Baltimore US and
    Nice France on a globus cluster and LSF cluster</para>

    <para>&nbsp;</para>

    <informalfigure>
      <mediaobject>
        <imageobject>
          <imagedata fileref="images/clusterLogo.png" format="PNG" width="6in" />
        </imageobject>
      </mediaobject>
    </informalfigure>

    <para>This experiment was partly sponsored by &nbsp;&nbsp; <informalfigure>
        <mediaobject>
          <imageobject>
            <imagedata fileref="images/logoSun.png" format="PNG" width="1in" />
          </imageobject>
        </mediaobject>
      </informalfigure></para>
  </sect1>
</chapter>