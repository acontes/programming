<?xml version="1.0" encoding="UTF-8"?>
<ProActiveDescriptor xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="DescriptorSchema.xsd">
    <componentDefinition>
        <virtualNodesDefinition>
            <virtualNode name="plugtest"/>
        </virtualNodesDefinition>
    </componentDefinition>
    <deployment>
        <mapping>
            <map virtualNode="plugtest">
                <jvmSet>
		    		<vmName value="JvmSSH"/>
                </jvmSet>
            </map>
        </mapping>
        <jvms>
            <jvm name="JvmSSH">
                <creation>
                    <processReference refid="sshProcess"/>
                </creation>
            </jvm>
        </jvms>
    </deployment>
	<fileTransferDefinitions>
		<fileTransfer id="ProActiveLite">
			<file src="TestFilename.txt"/>
			<dir src="ProActive"/>
		</fileTransfer>
	</fileTransferDefinitions>
    <infrastructure>
	<processes>
		<processDefinition id="jvmProcess">
                <jvmProcess class="org.objectweb.proactive.core.process.JVMNodeProcess">
                    <classpath>
						<absolutePath value="/home2/plugtest/ProActive/lib/ProActive.jar"/>
                        <absolutePath value="/home2/plugtest/ProActive/lib/asm.jar"/>
                        <absolutePath value="/home2/plugtest/ProActive/lib/bouncycastle.jar"/>
                        <absolutePath value="/home2/plugtest/ProActive/lib/fractal.jar"/>
                        <absolutePath value="/home2/plugtest/ProActive/lib/jsch.jar"/>
                        <absolutePath value="/home2/plugtest/ProActive/lib/log4j.jar"/>
                        <absolutePath value="/home2/plugtest/ProActive/lib/xercesImpl.jar"/>
                        <absolutePath value="/home2/plugtest/ProActive/lib/javassist.jar"/>
                        <absolutePath value="/home2/plugtest/ProActive/lib/nqueen.jar"/>
                    </classpath>
                    <javaPath>
                        <absolutePath value="/usr/java/bin/java"/>
                    </javaPath>
                    <policyFile>
                        <absolutePath value="/home2/plugtest/ProActive/scripts/proactive.java.policy"/>
                    </policyFile>
                    <log4jpropertiesFile>
                        <absolutePath value="/home2/plugtest/ProActive/scripts/proactive-log4j"/>
                    </log4jpropertiesFile>
                </jvmProcess>
		</processDefinition>
		<processDefinition id="sshProcess">
            <sshProcess class="org.objectweb.proactive.core.process.ssh.SSHProcess" hostname="localhost">
            	<processReference refid="jvmProcess"/>
				<fileTransferDeploy refid="ProActiveLite">
					<!-- scp is used to copy the files, one can still put scp, rcp,.... if the first protocol fails, the second one is tried and so on  -->
					<copyProtocol>scp</copyProtocol>
					<!-- following line also works since scp is the default protocol for ssh process-->
					<!--<copyProtocol>processDefault</copyProtocol>-->
					<sourceInfo prefix="/home1/plugtest"/>
					<destinationInfo prefix="/home2/plugtest"/>
				</fileTransferDeploy>
            </sshProcess>
		</processDefinition>
	  </processes>
    </infrastructure>
</ProActiveDescriptor>
