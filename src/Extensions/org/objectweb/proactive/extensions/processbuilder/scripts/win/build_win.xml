<?xml version="1.0" encoding="UTF-8"?>
<project>
	<target name="-pb.windows.scripts" >
		<property name="pb.dist" value="../dist"/>
		<property name="pb.win"  value="${src.extensions.dir}/${extensions.path}/processbuilder/scripts/win" /> 
		
		<mkdir dir="${pb.dist}/scripts/processbuilder"/>
		<mkdir dir="${pb.dist}/scripts/processbuilder/win"/>
		
		<copy todir="${pb.dist}/scripts/processbuilder/win" file="${pb.win}/CONTENTS.txt" />
		
		<if>
			<bool>
				<os family="Unix" />
			</bool>
			<!-- In case of linux since the permissions are not preserved by <copy>, we use the cp command -->
			<exec executable="cp" os="Linux">
				<arg line="${pb.win}/launch.bat ${pb.win}/command_step.bat ${pb.win}/user_step.bat ${pb.win}/check_runas.bat ${pb.win}/command_step_redirect.bat ${pb.win}/PipeBridge.exe ${pb.dist}/scripts/processbuilder/win" />
			</exec>
			
			<else>
				<!-- copy files -->
				<copy todir="${pb.dist}/scripts/processbuilder/win" file="${pb.win}/launch.bat" />
				<copy todir="${pb.dist}/scripts/processbuilder/win" file="${pb.win}/command_step.bat" />
				<copy todir="${pb.dist}/scripts/processbuilder/win" file="${pb.win}/user_step.bat" />
				<copy todir="${pb.dist}/scripts/processbuilder/win" file="${pb.win}/check_runas.bat" />
				<copy todir="${pb.dist}/scripts/processbuilder/win" file="${pb.win}/command_step_redirect.bat" />
				<copy todir="${pb.dist}/scripts/processbuilder/win" file="${pb.win}/PipeBridge.exe" />				
			</else>
		</if>
	</target>
</project>