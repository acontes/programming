<?xml version="1.0" encoding="UTF-8"?>
<project>
  
  	<property name="ic2d.file.set" value="../doc/toolchain" />
	<property name="ic2d.src.dir" value="../doc/src_ic2d" />
	<property name="ic2d.doc.name" value="IC2D" />
	<property name="docs.tmp.dir"	value="${basedir}/../doc/tmp" />

	<!-- ================================================================ -->
	<!--            Create docs, which is the javadoc + manual            -->
	<!--  =============================================================== -->
	<target name="doc.IC2D.docs" depends="doc.IC2D.javadoc.complete, doc.IC2D.manual, doc.IC2D.doc.zips" description="Generate the ProActive Optimizing javadoc, manual, and zip archives" />
	
	<!-- ================================================================ -->
	<!--            Create docs, which is the javadoc + manual            -->
	<!--  =============================================================== -->
	<target name="doc.IC2D.doc.zips" depends="doc.IC2D.manualSingleHtmlZip, doc.IC2D.manualHtmlZip,doc.IC2D.javadoc.completeZip" description="Generate the ProActive Optimizing javadoc and manual zip archives" />
	
	
	<!-- ==================================================================== -->
	<!--          Make just the html files for the manual                     -->
	<!-- ==================================================================== -->
	<target name="doc.IC2D.manualHtml" description="Generate the ProActive Optimizing HTML manual">
		<subant target="manualHtml" 	inheritall="true">
			<property name="doc.name"               value="${ic2d.doc.name}"/>
			<property name="docs.src.dir"           value="${ic2d.src.dir}" />  
			<fileset dir="${ic2d.file.set}" includes="doc.xml"/>
		</subant>
	</target>
	<!-- ==================================================================== -->
	<!--   Make an archive from the files for the multiple html manual        -->
	<!-- ==================================================================== -->
	<target name="doc.IC2D.manualHtmlZip" description="Generate the zip of the ProActive Optimizing HTML manual" depends="doc.IC2D.manualHtml">
		<subant target="manualHtmlZip" 	inheritall="true">
			<property name="doc.name"               value="${ic2d.doc.name}"/>
			<property name="docs.src.dir"           value="${ic2d.src.dir}" />  
			<fileset dir="${ic2d.file.set}" includes="doc.xml"/>
		</subant>
	</target>

	<!-- ==================================================================== -->
	<!--               Make just the pdf files for the manual                 -->
	<!-- ==================================================================== -->
	<target name="doc.IC2D.manualPdf" description="Generate the ProActive Optimizing PDF manual">
		<subant target="manualPdf" 	inheritall="true">
			<property name="doc.name"               value="${ic2d.doc.name}"/>
			<property name="docs.src.dir"           value="${ic2d.src.dir}" />  
			<fileset dir="${ic2d.file.set}" includes="doc.xml"/>
		</subant>
	</target>
	<!-- ==================================================================== -->
	<!--           Make only one huge html-file from the doc                  -->
	<!-- ==================================================================== -->
	<target name="doc.IC2D.manualSingleHtml" description="Generate the ProActive Optimizing single HTML manual">
		<subant target="manualSingleHtml" 	inheritall="true">
			<property name="doc.name"               value="${ic2d.doc.name}"/>
			<property name="docs.src.dir"           value="${ic2d.src.dir}" />  
			<fileset dir="${ic2d.file.set}" includes="doc.xml"/>
		</subant>
	</target>
	
	<!-- ==================================================================== -->
	<!--      Make an archive from the files for the single html manual       -->
	<!-- ==================================================================== -->
	<target name="doc.IC2D.manualSingleHtmlZip" description="Generate the ProActive Optimizing single HTML manual zip" depends="doc.IC2D.manualSingleHtml">
		<subant target="manualSingleHtmlZip" 	inheritall="true">
			<property name="doc.name"               value="${ic2d.doc.name}"/>
			<property name="docs.src.dir"           value="${ic2d.src.dir}" />  
			<fileset dir="${ic2d.file.set}" includes="doc.xml"/>
		</subant>
	</target>

	<!-- ==================================================================== -->
	<!--      Make an archive from the complete javadoc       -->
	<!-- ==================================================================== -->
	<target name="doc.IC2D.javadoc.completeZip" description="Generate the ProActive Optimizing complete javadoc zip" depends="doc.IC2D.javadoc.complete"> 
		<subant target="javadoc.completeZip" inheritall="true">
			<property name="doc.name"               value="${ic2d.doc.name}"/>
			<fileset dir="${ic2d.file.set}" includes="doc.xml"/>
		</subant>
	</target>
	
	
	
	<!-- ==================================================================== -->
	<!-- Construct the manual from the XML files in {docs.src}                -->
	<!-- ==================================================================== -->
	<target name="doc.IC2D.manual" description="Generate all the ProActive Optimizing manuals (html, single html, pdf) " depends="doc.IC2D.manualSingleHtml,doc.IC2D.manualHtml,doc.IC2D.manualPdf" />
	
    <!-- javadoc paths are not include through subant-->
      <path id="docs.utils.classpath.javadoc">
	      <fileset dir="../doc/toolchain/lib">
		      <include name="**/*.jar"/>
	      </fileset>
	      
      </path>

    <property name="docs.fractal.link"			value="http://fractal.objectweb.org/current/doc/javadoc/fractal/"/>
    <property name="docs.java.api.link" 		value="http://java.sun.com/j2se/1.5.0/docs/api/"/>
    <property name="ic2d.plugins.src.dir"			value="${base.dir}/ic2d-plugins-src/org.objectweb.proactive.ic2d" />
    <property name="ic2d.lib.dir"			value="${base.dir}/ic2d-plugins-src/org.objectweb.proactive.ic2d.lib/lib/" />


	<target name="doc.IC2D.javadoc.complete" depends="compile.util, deploy"  description="Generate the ProActive Optimizing complete javadoc">
 	  <mkdir dir="${docs.tmp.dir}" /> 
	  <javadoc  
	      destdir="../doc/built/IC2D/api_complete" 
	      author="true" 
	      version="true" 
	      source="${source}" 
	      use="true" 
	      windowtitle="IC2D Complete API" 
	      breakiterator="yes" 
	      additionalparam="-docfilessubdirs -excludedocfilessubdir CVS:test_documentation"> 
	      
            <classpath>
                <pathelement path="${ic2d.lib.dir}"/>
		<pathelement path="../dev/lib/*.jar" />
            </classpath>
            
    		<packageset dir="${ic2d.plugins.src.dir}/src"/>
    		<packageset dir="${ic2d.plugins.src.dir}.base/src"/>
    		<packageset dir="${ic2d.plugins.src.dir}.chartit/src"/>
    		<packageset dir="${ic2d.plugins.src.dir}.console/src"/>
    		<packageset dir="${ic2d.plugins.src.dir}.dgc/src"/>
    		<packageset dir="${ic2d.plugins.src.dir}.JMXmonitoring/src"/>
    		<packageset dir="${ic2d.plugins.src.dir}.jobmonitoring/src"/>
    		<packageset dir="${ic2d.plugins.src.dir}.launcher/src"/>
    		<packageset dir="${ic2d.plugins.src.dir}.security/src"/>
    		<packageset dir="${ic2d.plugins.src.dir}.timit/src"/>
    		
            <link href="${docs.fractal.link}" />
            <link href="${docs.java.api.link}"/>
			
        	<doctitle>ProActive Optimizing ${version}</doctitle>
            <bottom>${javadoc.copyright}</bottom>
	      
	      
	  </javadoc>
    </target>
  
</project>
