// Get back the MessageTags from the current request being served
MessageTags tags = PAMessageTagging.getCurrentTags();

// Create a new tag of identifier "TAG_00"
Tag t = tags.addTag(new Tag("TAG_00") {

    // Implement the apply method of Tag
    public Tag apply() {
        Integer i = (Integer) getLocalMemory().get("MT_00");
        if (i != null) {
            getLocalMemory().put("MT_00", ++i);
        }
        return this;
    }
});

// Create the LocalMemory for the tag "t" with a lease value of 10 seconds
// and put the value "0" into at key "MT_00"
t.createLocalMemory(10).put("MT_00", new Integer(0));

// Get back the value saved in the local memory of the tag "t" at the key "MT_00"
int res = (Integer) t.getLocalMemory().get("MT_00");
